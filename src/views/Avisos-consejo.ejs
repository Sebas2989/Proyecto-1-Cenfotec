<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="/img/favicon.ico">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="css/Inicio_Sesion_moni.css">
    <link rel="stylesheet" href="css/Carousel.css">
    <link rel="stylesheet" href="css/Botones.css">
    <link rel="stylesheet" href="css/noticias.css">
    <link rel="stylesheet" href="css/header_footer.css">
    <link rel="stylesheet" href="css/Avisos.css">


    <title>Inicio</title>
</head>
<body>
    <header>
        <nav>
            <div class="menu">
                <a href="/" class="a-order">
                    <img src="/img/Logo.png" alt="logo" srcset="" class="logo">
                </a>
                <button class="hamburger"><i class="fa-solid fa-bars"></i></button>
                <ul class="ulMenu hidden2">
                    <li class="serviciosMenu fix"><a class="centr" href="/servicios">Servicios</a></li>
                    <li class="serviciosMenu fix"><a href="/denuncias">Denuncias</a></li>
                    <li class="serviciosMenu fix"><a href="#footer">Contactenos</a></li>
                </ul>
                <div class="iconosHeader contenedorSesion">
                    <% if (role) { %>
                        <a href="/perfil" class="buttonnDesplegar desplegarSesion">
                            <i class="fa-solid fa-circle-user"></i>
                        </a> 
                         <form action="/logout" method="get">
                            <button class="formulario__buttonn">
                                <i class="fa-solid fa-right-from-bracket"></i> Cerrar sesión
                            </button>
                        </form>
                    <% } else { %>
                    <button class="buttonDesplegar desplegarSesion">
                        <i class="fa-solid fa-circle-user"></i>
                    </button>
                    <div class="lista hidden contenedor_padre">
                        <div id="sesiones" class="sesiones">
                            <div class="contenedor-izquierdo">
                                <p id="titulo_formulario">¿Ya tienes cuenta?<br>Escribe tus datos aquí</p>
                                <form action=/autenticarinicio method="post" id="formulario">
                                    <div class="formulario__grupo" id="grupo__email">
                                        <label class="formulario__label" for="email">Correo Electrónico</label>
                                        <div class="formulario__grupo-input">
                                            <i class='bx bxs-envelope'></i>
                                            <input type="email" class="formulario__input" name="email" id="email" placeholder="Correo electrónico">
                                        </div>
                                        <p class="formulario__input-error">El correo debe de seguir la siguiente estructura: dato1@dato2.dato3</p>
                                    </div>
                                    <div class="formulario__grupo" id="grupo__password">
                                        <label class="formulario__label" for="password">Contraseña</label>
                                        <div class="formulario__grupo-input">
                                            <i class='bx bxs-lock-alt'></i>
                                            <input type="password" class="formulario__input" name="password" id="password" placeholder="Contraseña">
                                        </div>
                                        <p class="formulario__input-error">La contraseña debe tener mínimo 4 carácteres y máximo 12 carácteres</p>
                                        <a href="/recuperacion_contra">¿Olvidaste la contraseña?</a>
                                    </div>
                                    <div class="formulario__grupo formulario__grupo-btn-enviar">
                                        <div class="formulario__button">
                                            <i class='bx bxs-lock-alt'></i>
                                            <input  type="submit" value="Ingresar a cuenta" class="formulario__btn button_submit">
                                        </div>
                                    </div>
                                    <p>o</p>
                                </form>
                                <div class="formulario__buttonGoogle">
                                    <i class='bx bxl-google'></i>
                                    <button type="button" class="formulario__btn button_google" id="boton-submit">Continuar con Google</button>
                                </div>
                        
                                <div class="formulario__mensaje" id="formulario__mensaje">
                                    <p><i class='bx bxs-x-circle' ></i>ERROR: Debes completar todos los campos</p>
                                </div>
                            </div>
                            <div class="contenedor-derecho">
                                <p>¿Aún no tienes cuenta?</p>
                                <div class="formulario__grupo formulario__grupo-btn-registrarse">
                                    <button type="button" class="formulario__btn button_registrarse" id="boton-submit"><a href="/registro">Registrarse</a></button>
                                </div>
                            </div>                
                        </div>
                    </div>
                    <% } %>
                </div>
            </div>
        </nav>
    </header>
    <div class="noticias">
                <!-- Checkbox oculto -->
                <input type="checkbox" id="checkbox_formulario" style="display: none;">
            
                <!-- Etiqueta que actúa como botón -->
                <label for="checkbox_formulario" class ="boton_noticia">Crear Noticia</label>
        
                <div class="formulario_noticia">
                    <form id="formNoticia" method="post" action="/noticias">
                        <label for="nombreNoticia">Nombre de la Noticia:</label>
                        <input type="text" name="tituloNoticias" required><br><br>
                        
                        <label for="fechaPublicacion">Fecha de Publicación:</label>
                        <input type="date" name="fechaNoticias" required><br><br>
                        
                        <label for="contenidoNoticia">Contenido de la Noticia:</label><br>
                        <textarea rows="4" cols="50" name="contenidoNoticias" required></textarea><br><br>
                        
                        <button type="submit">Publicar</button>
                    </form>
                </div>        
        <div>
            <h1>Noticias año 2025</h1>
            <% if (noticias && noticias.length > 0) { %>
                <% noticias.forEach(noticia => { %>
                    <div class="noticia">
                        <img class="imgNoticias" src="/img/campanas_recoleccion.png" alt="">
                        <div class="noticia_info">
                            <h1><%= noticia.nombreNoticia %></h1>
                            <h2><%= noticia.fechaPublicacion %></h2>
                            <p class="espacio"><%= noticia.contenidoNoticia %></p>
                            <a class="espacio" href="/noticias.html">Leer más...</a>
                        </div>
                    </div>
                <% }) %>
            <% } else { %>
                <p>No hay noticias disponibles por el momento.</p>
            <% } %>
        </div>
    </div>
    <!-- Editar este codigo bien -->
    <div class="padre_avisos-servicios">
        <section class="carouselcontainer">
            <div class="inzona3">
                <h1>
                    Avisos
                </h1>
                <br><br>
                <section class="container">
                    <div class="incontainer">
                        <ul class="cards">
                            <% if (role === 'admin') { %>
                            <li class="card">
                                <div>
                                    <div class="card-content"> 
                                        <div class="iconoMas animacionBordes">
                                            <input type="checkbox" id="mostarFormulario" class="formularioCrear-aviso">
                                            <div class="icono">
                                                <label class="mostarFormulario" for="mostarFormulario"><i class="fa-solid fa-plus"></i></label>
                                            </div>
                                            <span></span>
                                            <span></span>
                                            <span></span>
                                            <span></span>
                                        </div>
                                    </div>
                                </div>
                            </li>
                            <% } %>
                            <% if (avisos && avisos.length > 0) { %>
                                <% avisos.forEach(aviso => { %>
                                <li class="card">
                                    <div class="card-content">
                                        <div class="iconoMas animacionBordes carousel">
                                            <div class="icono">
                                                <label class="mostarFormulario"><i class="fa-solid fa-newspaper"></i></label>
                                                <h3><%= aviso.avisosTitulo %></h3>
                                            </div>
                                            <span></span>
                                            <span></span>
                                            <span></span>
                                            <span></span>

                                            <div class="hide">
                                                <h3 class="inHide"><%= aviso.avisosTitulo %></h3>
                                                <p class="inHide"><%= aviso.avisosFecha %></p>
                                                <br><br>
                                                <p class="inHide2"><%= aviso.avisosContenido %></p>
                                            </div>
                                        </div>
                                    </div>
                                </li>
                                <% }) %>
                            <% } else { %>
                                <p>No hay avisos publicados por el momento.</p>
                            <% } %>
                        </ul>
                    </div>
                </section>
                <% if (role === 'admin') { %>
                <div id="formularioAvisos" class="hidden">
                    <button id="cerrarForm" class="buttonCerrar"><i class="fa-solid fa-xmark"></i></button>
                    <h1>Formulario de Avisos</h1>
                    <form method="post" action="/avisos">
                        <label class="labelsFormulario" for="avisosTitulo">Titulo del Aviso:</label>
                        <input type="text" name="tituloAvisos">
                        <label class="labelsFormulario" for="avisosFecha">Fecha de la publicacion:</label>
                        <input type="date" name="fechaAvisos">
                        <label class="labelsFormulario" for="avisosContenido">Contenido del aviso:</label>
                        <textarea name="contenidoAvisos" id="" cols="30" rows="4"></textarea> 
                        <div class="botonesFormulario-avisos">
                            <input type="submit" value="Enviar" class="botonesAvisos verde">
                            <input type="reset" value="Cancelar" class="botonesAvisos rojo">
                        </div> 
                    </form>
                </div>
                <% } %>
        </section>
    </div>
    <footer>
        <div class="padreFooter" id="footer">
            <div class="hijosFooter1"><img src="/img/Logo_footer.png" alt="logo" srcset="" class="logoFooter"></div>
            <div class="hijosFooter2">
                <ul class="ulMenu menuFooter">
                    <li class="serviciosMenu"><a href="/Servicios.html">Servicios</a></li>
                    <li class="serviciosMenu"><a href="/Denuncias.html">Denuncias</a></li>
                    <li class="serviciosMenu"><a href="#">Contactenos</a></li>
                </ul>
            </div>
            <div class="hijosFooter3">
                <i class="fa-brands fa-facebook"></i>
                <i class="fa-brands fa-instagram"></i>
                <i class="fa-brands fa-x-twitter"></i>
            </div>
        </div>
    </footer>
    <script src="js/Inicio_Sesion.js" defer></script>
    <script src="js/Carousel.js" defer></script>

</body>
</html>